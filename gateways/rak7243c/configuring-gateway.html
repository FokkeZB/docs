<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (!document.location.href.substr(0, document.location.href.length - document.location.hash.length).startsWith(canonical)) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/gateways/rak7243c/configuring-gateway.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Configuring Your Gateway | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Configuring Your Gateway" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Configuring the Gateway Assuming you have successfully logged into your LoRa Gateway using SSH. Enter the following command in the command line: sudo gateway-config" />
<meta property="og:description" content="Configuring the Gateway Assuming you have successfully logged into your LoRa Gateway using SSH. Enter the following command in the command line: sudo gateway-config" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/gateways/rak7243c/configuring-gateway.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/gateways/rak7243c/configuring-gateway.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-16T16:31:37+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Configuring Your Gateway" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"headline":"Configuring Your Gateway","dateModified":"2021-03-16T16:31:37+00:00","datePublished":"2021-03-16T16:31:37+00:00","description":"Configuring the Gateway Assuming you have successfully logged into your LoRa Gateway using SSH. Enter the following command in the command line: sudo gateway-config","url":"https://www.thethingsnetwork.org/docs/gateways/rak7243c/configuring-gateway.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/gateways/rak7243c/configuring-gateway.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <!-- <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div> -->
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <!--<li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>-->
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/quick-start/">Quick Start</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class=""><a href="/docs/devices-and-gateways/">Devices & Gateways</a></li>
                <li class=""><a href="/docs/applications-and-integrations/">Applications</a></li>
                <li class=""><a href="/docs/the-things-stack/">The Things Stack</a></li>
                <li class=""><a href="/docs/v2-docs/">V2 docs</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/gateways/rak7243c/configuring-gateway.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>configuring-gateway.md</strong></a>
      </div>
    </div>
    <div class="row wrapper">
      <div class="col-sm-3 side-nav">
        <div class="panel page-side-nav">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/gateways/index.html"><h5>Gateways</h5></a>
            <ul>
                <li class=""><a href="/docs/gateways/basics-station/">LoRa Basics™ Station</a>
                </li>
                <li class=""><a href="/docs/gateways/certificates/">Root Certificates</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>Running a gateway</span>
            <ul>
                <li class=""><a href="/docs/gateways/start/">Where to start</a>
                </li>
                <li class=""><a href="/docs/gateways/registration.html">Gateway Registration</a>
                </li>
                <li class=""><a href="/docs/gateways/packet-forwarder/">Packet Forwarders</a>
                </li>
                <li class=""><a href="/docs/gateways/lightning-protection.html">Lightning Protection</a>
                </li>
                <li class=""><a href="/docs/gateways/troubleshooting/">Troubleshooting</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/gateways/thethingsindoor/">The Things Indoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/thethingsoutdoor/">The Things Outdoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/gateway/">The Things Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/">MultiTech Conduit</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/">RAK2245 Pi Hat Edition - LoRaWAN® Gateway Concentrator Module</a>
                </li>
                <li class=""><a href="/docs/gateways/rak7243c/">RAK7243C Pilot Gateway</a>
            <ul>
                <li class=""><a href="/docs/gateways/rak7243c/device-firmware-setup.html">Device Firmware Setup</a>
                </li>
                <li class=""><a href="/docs/gateways/rak7243c/accesing-gateway.html">Accessing Your Gateway</a>
                </li>
                <li class="active"><a href="/docs/gateways/rak7243c/configuring-gateway.html">Configuring Your Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/rak7243c/connecting-to-ttn.html">Connecting to The Things Network (TTN)</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/rak831/">RAK831</a>
                </li>
                <li class=""><a href="/docs/gateways/pisupply-hat/">Pi Supply Gateway HAT</a>
                </li>
                <li class=""><a href="/docs/gateways/aaeon/">AAEON</a>
                </li>
                <li class=""><a href="/docs/gateways/cisco/">Cisco LoRaWAN Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/">Kerlink</a>
                </li>
                <li class=""><a href="/docs/gateways/laird/">Laird RG1xx</a>
                </li>
                <li class=""><a href="/docs/gateways/lorrier/">Lorrier LR2</a>
                </li>
                <li class=""><a href="/docs/gateways/mikrotik/">MikroTik Routerboard</a>
                </li>
                <li class=""><a href="/docs/gateways/st/">P-NUCLEO-LRWAN2</a>
                </li>
                <li class=""><a href="/docs/gateways/tektelic/">Tektelic</a>
                </li>
                <li class=""><a href="/docs/gateways/ursalink/">Ursalink</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-9 page-body">
        <div class="panel">
          <div class="panel-body page-content">
            <h2 id="configuring-the-gateway">Configuring the Gateway</h2>
<p>Assuming you have successfully logged into your LoRa Gateway using SSH. Enter the following command in the command line:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo gateway-config
</code></pre>
</div>
<p>You will now then see a page like the following picture below</p>
<p><img src="images/config-options.png" alt="Figure 1: Configuration Options for the Gateway" /></p>
<ol>
  <li><strong>Set pi password</strong> - used to set/change the password of the LoRa Gateway.</li>
  <li><strong>Set up RAK Gateway LoRa Concenterator</strong> - used to configure the frequency, which the LoRa Gateway will operate on, and the LoRa Server which the LoRa Gateway will work with.</li>
  <li><strong>Edit packet-forwarder config</strong>- used to open the global_conf.json file, in order to edit LoRaWAN parameters manually.</li>
  <li><strong>Restart packet -forwarder</strong> - used to restart the LoRa packet forwarded process.</li>
  <li><strong>Configure Wifi</strong> - used to configure the Wi-Fi settings in order to connect to a network.</li>
  <li><strong>Configure LAN</strong> - used to configure the Ethernet adapter settings.</li>
</ol>
<blockquote>
  <p><strong>Gateway ID</strong> A unique ID will be generated in for LoRa Gateway. This is also called Gateway EUI and is essential for registering the gateway with any LoRa Network Server (TTN, LoRaServer).</p>
</blockquote>
<p><img src="images/gateway-id.png" alt="Figure 2: Gateway ID in the Configuration Window" /></p>
<p>There is also another way to get your “Gateway ID”, just enter the command below in the command line:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>gateway-version
</code></pre>
</div>
<p><img src="images/gateway-id-cmd.png" alt="Figure 3: Gateway ID using the command line" /></p>
<h3 id="set-a-new-password-for-the-lora-gateway">Set a new password for the LoRa Gateway</h3>
<p>It is a good security practice to change the default password <strong>“raspberry”</strong> which is the same on all Raspberry Pi devices.</p>
<p><img src="images/passwd.png" alt="Figure 4: Changing the default password" /></p>
<p>You will be asked to enter your new password twice then press “Enter”.</p>
<h3 id="set-up-rak-gateway-lora-concentrator">Set up RAK Gateway LoRa concentrator</h3>
<p>This menu allows you to select your LoRa frequency band and one of the two available Networks Server options:</p>
<ul>
  <li><strong>TTN (The Things Network).</strong> If you choose TTN as the LoRa Server, you will see the following page. Visit this <a href="https://www.thethingsnetwork.org/docs/lorawan/frequencies-by-country.html">article</a> for more information on your local TTN frequency plan. This will allow you to choose the correct plan.</li>
</ul>
<p><img src="images/ttn.jpg" alt="Figure 5: Selecting the TTN Channel Plan" /></p>
<ul>
  <li><strong>LoRaServer.</strong> If you choose LoRaServer as your LoRa Server, you will see the following page:</li>
</ul>
<p><img src="images/ttn-loraserver.png" alt="Figure 6: Selecting the Channel Plan for LoRaServer" /></p>
<p>Just like with TTN, choose the appropriate frequency for your country. Next, you need to set the IP Address of the LoRaServer, which you want your LoRa Gateway to work with.</p>
<p><img src="images/loraserver-ip.png" alt="Figure 7: Default LoRaServer IP Address" /></p>
<p>The default IP Address is <code class="highlighter-rouge">127.0.0.1</code>. If you want to use an external LoRaServer, you need to set it to its IP Address.</p>
<h2 id="connect-the-lora-gateway-to-a-router">Connect the LoRa Gateway to a Router</h2>
<p>If you want to use TTN or an independent LoRaServer which may be deployed in Local area network or Internet, you need to connect your LoRa Gateway to a router first.</p>
<h3 id="connect-through-wi-fi">Connect through Wi-Fi</h3>
<p>If you want to connect through Wi-Fi, it can easily be done with the Wireless capabilities of the Raspberry Pi.</p>
<p><img src="images/wifi.png" alt="Figure 8: Configuration options for WIFI" /></p>
<p>There are 4 options to choose from in the Wi-Fi configuration menu:</p>
<ol>
  <li><strong>Enable AP Mode/Disable Client Mode</strong> - the LoRa Gateway will work in Wi-Fi Access Point Mode after rebooting while the Wi-Fi Client Mode will be disabled (this is the default mode).</li>
  <li><strong>Enable Client Mode/Disable AP Mode</strong> - the LoRa Gateway will work in Wi-Fi Client mode after rebooting, while Wi-FI AP Mode will be disabled.</li>
  <li><strong>Modify SSID and pwd for AP Mode</strong> - used to modify the SSID and password of the Wi-Fi AP. Only works if the Wi-Fi AP Mode is enabled.</li>
  <li><strong>Add New SSID for Client</strong> - this is used if you want to connect to a new Wi-Fi Network. Only works in Wi-Fi Client mode.</li>
</ol>
<h3 id="connect-through-ethernet">Connect through Ethernet</h3>
<p>If you want to connect to router through Ethernet Cable, do the following steps:</p>
<ul>
  <li>Just fill a static IP Address according to the IP address of the router you want to connect. Please note that the LoRa gateway and the router must be in the same network segment, otherwise the connection will fail.</li>
  <li>By default, the IP Address of the LoRa Gateway’s Ethernet is <code class="highlighter-rouge">192.168.10.10</code></li>
</ul>
<p><img src="images/ip-lora.png" alt="Figure 9: Default LoRa Gateway Ethernet IP Address" /></p>
<ul>
  <li>Then configure the IP address of the Router. This is the LAN Interface IP address of the router:</li>
</ul>
<p><img src="images/lan-ip.png" alt="Figure 10: LAN Interface IP Address of the Router" /></p>
<ul>
  <li>Press OK then reboot the LoRa Gateway using the command <code class="highlighter-rouge">sudo reboot now</code> in the command line and it will connect to the router successfully through Ethernet.</li>
</ul>
<h2 id="connect-the-lte-only-for-the-cellular-version">Connect the LTE (Only for the Cellular Version)</h2>
<p>If you want to deploy your LoRa Gateway to a place where there is no option of connecting to the internet through Wi-Fi or Ethernet, you can still do this through LTE.</p>
<ul>
  <li>
    <p>First, make sure you have already inserted a suitable SIM Card into the RAK7243C Pilot Gateway. If not, turn off the gateway using the command <code class="highlighter-rouge">sudo shutdown now</code> and insert the card.</p>
  </li>
  <li>
    <p>Login to your gateway using SSH and enter the command <code class="highlighter-rouge">gateway-config</code> and choose Item 8. Configure LTE Module.</p>
  </li>
</ul>
<p><img src="images/config_lte_option.png" alt="Figure 11: Configure LTE Module Option" /></p>
<p>You will see 2 items:</p>
<p><img src="images/Enable_LTE.png" alt="Figure 12: Enable LTE Automatic Dial-up" /></p>
<p>There are 2 configuration Options for the LTE Module:</p>
<ol>
  <li>
    <p><strong>Enable LTE Automatic Dial-up</strong> - the LoRa Gateway will connect to LTE Automatically, when it boots.</p>
  </li>
  <li>
    <p><strong>Disable LTE Automatic Dial-up</strong> - the LoRa Gateway will not connect to LTE Automatically.</p>
  </li>
</ol>
<blockquote>
  <p><strong>Note</strong> By default, the LoRa Gateway will connect to LTE Automatically, when it boots. If you want to
disable it, choose “Disable LTE Automatic Dial-up”</p>
</blockquote>
<ul>
  <li>
    <p>Now let’s configure the LTE Network operator’s information. You should make sure that the state of the LTE Connecting Automatically is disabled as of now!</p>
  </li>
  <li>
    <p>Open the built in serial port tool, by executing the following command:</p>
  </li>
</ul>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo minicom -D /dev/ttyAMA0 -b 115200
</code></pre>
</div>
<p>Then you will be directed to minicom window:</p>
<p><img src="images/minicom_window.png" alt="Figure 13: Minicom in the Serial Port Tool" /></p>
<ul>
  <li>Try to enter the command <code class="highlighter-rouge">at</code> , if it returns <strong>OK</strong>, it means that you have opened the Serial Port Successfully!</li>
</ul>
<blockquote>
  <p><strong>Note</strong> If you can’t see “at” in the terminal, try to press “Ctrl + A” , then press “Z”, then lastly press
“E”.</p>
</blockquote>
<ul>
  <li>Now, execute the AT Command <code class="highlighter-rouge">at+cops=?</code> to query all LTE Networks around you. It may take several seconds. When it is done, you can see some information like this:</li>
</ul>
<p><img src="images/Query_LTE.png" alt="Figure 14: Querying LTE Networks" /></p>
<ul>
  <li>
    <p>The figure above is just a demo showing the different LTE Networks in China and may differ depending on your area.</p>
  </li>
  <li>
    <p>Execute the AT Command <code class="highlighter-rouge">at+cops=1,0,XXX,YYY</code> to set the information of the LTE Network operator which you want to use. “XXX” is the operator identification name (ex: CHINA MOBILE, CHN-UNICOM, CHN-CT). “YYY” is the last number of the information for each operator - 0 for CHINA MOBILE.</p>
  </li>
  <li>
    <p>If it returns “<strong>OK</strong>” then you have set it successfully!</p>
  </li>
</ul>
<h2 id="configure-apn-name">Configure APN Name</h2>
<p>Now, you should set the APN name for the pppd process too. Go back to configuration options and choose “<strong>7 Configure APN name</strong>”:</p>
<p><img src="images/APN.png" alt="Figure 15: Configure APN Name" /></p>
<p>The default APN Name is “HOLOGRAM”. If you want to modify it, please note that the value must be a true and valid APN Name.Then, set the appropriate baud rate, its default value is 115200.</p>
<p><img src="images/Baud_Speed.png" alt="Figure 16: Default Baud Speed - 115200" /></p>
<p>To test the LTE Function, execute the following command:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo pppd call gprs
</code></pre>
</div>
<p>A log will be displayed. At the end of it, you can see the local and remote IP address and the primary and secondary DNS:</p>
<p><img src="images/DNS_Add.png" alt="Figure 17: Primary and Secondary DNS Address" /></p>
<ul>
  <li>
    <p>If you see valid addresses as in the image above, it means that the LoRa Gateway has connected to the LTE Network successfully!</p>
  </li>
  <li>
    <p>The last thing you should not forget to do, is to enable the LTE Connecting automatically when it starts.</p>
  </li>
</ul>
          </div>  
        </div>
        <div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
