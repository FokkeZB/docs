<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (!document.location.href.substr(0, document.location.href.length - document.location.hash.length).startsWith(canonical)) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/gateways/kerlink/station/cellular.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Cellular Connection | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Cellular Connection" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Cellular Connection" />
<meta property="og:description" content="Cellular Connection" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/gateways/kerlink/station/cellular.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/gateways/kerlink/station/cellular.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-10T16:57:22+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Cellular Connection" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"datePublished":"2021-03-10T16:57:22+00:00","image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","description":"Cellular Connection","url":"https://www.thethingsnetwork.org/docs/gateways/kerlink/station/cellular.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/gateways/kerlink/station/cellular.html"},"headline":"Cellular Connection","dateModified":"2021-03-10T16:57:22+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <!-- <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div> -->
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class=""><a href="/docs/devices/">Devices</a></li>
                <li class="active"><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
                <li class=""><a href="/docs/the-things-stack-v3/">The Things Stack V3</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/gateways/kerlink/station/cellular.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>cellular.md</strong></a>
      </div>
      <div class="col-12">
        This documentation page applies to the legacy Things Network Stack V2. Documentation for The Things Stack V3 is available <a href="https://thethingsstack.io">here</a>
      </div>
    </div>
    <div class="row wrapper">
      <div class="col-sm-3 side-nav">
        <div class="panel page-side-nav">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/gateways/index.html"><h5>Gateways</h5></a>
            <ul>
                <li class=""><a href="/docs/gateways/basics-station/">LoRa Basics™ Station</a>
                </li>
                <li class=""><a href="/docs/gateways/certificates/">Root Certificates</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>Running a gateway</span>
            <ul>
                <li class=""><a href="/docs/gateways/start/">Where to start</a>
                </li>
                <li class=""><a href="/docs/gateways/registration.html">Gateway Registration</a>
                </li>
                <li class=""><a href="/docs/gateways/packet-forwarder/">Packet Forwarders</a>
                </li>
                <li class=""><a href="/docs/gateways/lightning-protection.html">Lightning Protection</a>
                </li>
                <li class=""><a href="/docs/gateways/troubleshooting/">Troubleshooting</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/gateways/thethingsindoor/">The Things Indoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/thethingsoutdoor/">The Things Outdoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/gateway/">The Things Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/">MultiTech Conduit</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/">RAK2245 Pi Hat Edition - LoRaWAN® Gateway Concentrator Module</a>
                </li>
                <li class=""><a href="/docs/gateways/rak7243c/">RAK7243C Pilot Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/rak831/">RAK831</a>
                </li>
                <li class=""><a href="/docs/gateways/pisupply-hat/">Pi Supply Gateway HAT</a>
                </li>
                <li class=""><a href="/docs/gateways/aaeon/">AAEON</a>
                </li>
                <li class=""><a href="/docs/gateways/cisco/">Cisco LoRaWAN Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/">Kerlink</a>
            <ul>
                <li class=""><a href="/docs/gateways/kerlink/keros/">KerOS installation and configuration</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/station/">Wirnet Station</a>
            <ul>
                <li class=""><a href="/docs/gateways/kerlink/station/specs.html">Specifications</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/station/setup.html">Setup</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/station/config.html">Configuration</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/station/firmware-updates.html">Firmware Updates</a>
                </li>
                <li class="active"><a href="/docs/gateways/kerlink/station/cellular.html">Cellular Connection</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/station/mount.html">Mount</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/ibts/">Wirnet iBTS</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/ifemtocell/">Wirnet iFemtoCell</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/ifemtocell-evolution/">Wirnet iFemtoCell Evolution</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/istation/">Wirnet iStation</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/laird/">Laird RG1xx</a>
                </li>
                <li class=""><a href="/docs/gateways/lorrier/">Lorrier LR2</a>
                </li>
                <li class=""><a href="/docs/gateways/mikrotik/">MikroTik Routerboard</a>
                </li>
                <li class=""><a href="/docs/gateways/st/">P-NUCLEO-LRWAN2</a>
                </li>
                <li class=""><a href="/docs/gateways/tektelic/">Tektelic</a>
                </li>
                <li class=""><a href="/docs/gateways/ursalink/">Ursalink</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-9 page-body">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="cellular-connection">Cellular Connection</h1>
<p>It is possible to connect the Kerlink to a GPRS/3G connection. This may be useful in locations where there is no ethernet network access, or where access to the local/company network is not allowed.</p>
<h2 id="configure-using-a-dota-file-and-usb-flash-drive">Configure using a dota file and USB flash drive</h2>
<p>It is possible to configure the GPRS/3G connection without logging into the gateway. This can be done in the same way as the packet forwarder was installed. An example dota file which should be copied to a flash drive is provided here. This dota will configure the gateway to use the <code class="highlighter-rouge">internet</code> APN and use a blank username and a blank password. This dota also applies the fix to allow blank login details for gprs.</p>
<ul>
  <li>Download <a href="https://raw.githubusercontent.com/TheThingsNetwork/kerlink-station-firmware/legacy/dota/dota_gprs_apn_internet_nopw.tar.gz">dota_gprs_apn_internet_nopw.tar.gz</a> and copy it to a USB flash drive without extracting it.</li>
  <li>Dowload <a href="https://raw.githubusercontent.com/TheThingsNetwork/kerlink-station-firmware/legacy/dota/produsb_wirnet_v3.6.zip">produsb_wirnet_v3.6.zip</a> and extract it to the flash drive.</li>
  <li>Plug the USB flash drive into the gateway and wait for the dota to be installed.</li>
</ul>
<p>The configuration files needed to get gprs/3G to work are inside the dota archive. You can modify them with your settings before installing the dota on the gateway.</p>
<h2 id="configure-by-manually-editing-config-files">Configure by manually editing config files</h2>
<p>Log into the gateway using SSH or a Wirgrid device.</p>
<p>Set your APN settings in <code class="highlighter-rouge">/etc/sysconfig/network</code> (see <a href="#provider-settings">Provider Settings</a>):</p>
<blockquote>
  <p><em>You can open the file via the terminal, type: <code class="highlighter-rouge">vi /etc/sysconfig/network</code>. Type <code class="highlighter-rouge">i</code> to start editing the file, after doing so, save and quit the file: press <code class="highlighter-rouge">esc</code> &gt; <code class="highlighter-rouge">:w</code> &gt; <code class="highlighter-rouge">esc</code> &gt; <code class="highlighter-rouge">:q</code></em></p>
</blockquote>
<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Selector operator APN
GPRSAPN=internet
# Enter pin code if activated
GPRSPIN=
# Update /etc/resolv.conf to get dns facilities
GPSDNS=yes
# PAP authentication
GPRSUSER=myusername
GPRSPASSWORD=mypassword

# Bearers priority order
BEARERS_PRIORITY="eth0,ppp0"
</code></pre>
</div>
<p>Configure the autoconnect in <code class="highlighter-rouge">/knet/knetd.xml</code></p>
<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- ############## connection parameters ############## --&gt;</span>
<span class="c">&lt;!-- enable the autoconnect feature (YES/NO) --&gt;</span>
<span class="nt">&lt;CONNECT</span> <span class="na">auto_connection=</span><span class="s">"YES"</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ############## default area for connection policy ############## --&gt;</span>

<span class="nt">&lt;AREA</span> <span class="na">id=</span><span class="s">"default"</span><span class="nt">&gt;</span>
<span class="nt">&lt;ACCESS_POINT</span> <span class="na">bearer=</span><span class="s">"gprs"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/AREA&gt;</span>  
</code></pre>
</div>
<p><strong>Warning:</strong> There is a bug in the software. When <code class="highlighter-rouge">GPRSUSER</code> and <code class="highlighter-rouge">GPRSPASSWORD</code> needs to stay empty the Kerlink does funny things and no connection is made. To resolve this problem, please apply <a href="https://github.com/TheThingsNetwork/kerlink-station-firmware/blob/master/dota/dota_update_gprs_script.tar.gz?raw=true">this patch</a>.</p>
<p><strong>Troubleshooting:</strong> If you are using the Kerlink SPF packet forwarder it will automatically restart when the internet connection changes. For other packet forwarders it might be necessary to restart the packet forwarder when this occurs. You can do so by adding the line: <code class="highlighter-rouge">/usr/bin/killall poly_pkt_fwd</code> at the bottom of the files <code class="highlighter-rouge">/etc/ppp/ip-up</code> and <code class="highlighter-rouge">/etc/ppp/ip-down</code>.</p>
<h2 id="provider-settings">Provider Settings</h2>
<h3 id="kpn">KPN</h3>
<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Selector operator APN
GPRSAPN=portalmmm.nl
# Enter pin code if activated
GPRSPIN=
# Update /etc/resolv.conf to get dns facilities
GPSDNS=yes
# PAP authentication
GPRSUSER=internet
GPRSPASSWORD=internet
</code></pre>
</div>
<h3 id="vodafone">Vodafone</h3>
<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Selector operator APN
GPRSAPN=live.vodafone.com
# Enter pin code if activated
GPRSPIN=
# Update /etc/resolv.conf to get dns facilities
GPSDNS=yes
# PAP authentication
GPRSUSER=vodafone
GPRSPASSWORD=vodafone
</code></pre>
</div>
<h3 id="ben">Ben</h3>
<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Selector operator APN
GPRSAPN=internet.ben
# Enter pin code if activated
GPRSPIN=
# Update /etc/resolv.conf to get dns facilities
GPSDNS=yes
# PAP authentication
GPRSUSER=
GPRSPASSWORD=
</code></pre>
</div>
          </div>  
        </div>
        <div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
