<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (!document.location.href.substr(0, document.location.href.length - document.location.hash.length).startsWith(canonical)) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Deploy Balena Basics™ Station | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Deploy Balena Basics™ Station" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Deploy a LoRa Basics™ Station using balena.io and RAK2245 Pi Hat" />
<meta property="og:description" content="Deploy a LoRa Basics™ Station using balena.io and RAK2245 Pi Hat" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-09T10:35:44+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Deploy Balena Basics™ Station" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"datePublished":"2021-03-09T10:35:44+00:00","image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","description":"Deploy a LoRa Basics™ Station using balena.io and RAK2245 Pi Hat","url":"https://www.thethingsnetwork.org/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html"},"headline":"Deploy Balena Basics™ Station","dateModified":"2021-03-09T10:35:44+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <!-- <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div> -->
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class=""><a href="/docs/devices/">Devices</a></li>
                <li class="active"><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
                <li class=""><a href="/docs/the-things-stack-v3/">The Things Stack V3</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/gateways/rak2245/deploy-balena-basics-station-gateway.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>deploy-balena-basics-station-gateway.md</strong></a>
      </div>
      <div class="col-12">
        This documentation page applies to the legacy Things Network Stack V2. Documentation for The Things Stack V3 is available <a href="https://thethingsstack.io">here</a>
      </div>
    </div>
    <div class="row wrapper">
      <div class="col-sm-3 side-nav">
        <div class="panel page-side-nav">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/gateways/index.html"><h5>Gateways</h5></a>
            <ul>
                <li class=""><a href="/docs/gateways/basics-station/">LoRa Basics™ Station</a>
                </li>
                <li class=""><a href="/docs/gateways/certificates/">Root Certificates</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>Running a gateway</span>
            <ul>
                <li class=""><a href="/docs/gateways/start/">Where to start</a>
                </li>
                <li class=""><a href="/docs/gateways/registration.html">Gateway Registration</a>
                </li>
                <li class=""><a href="/docs/gateways/packet-forwarder/">Packet Forwarders</a>
                </li>
                <li class=""><a href="/docs/gateways/lightning-protection.html">Lightning Protection</a>
                </li>
                <li class=""><a href="/docs/gateways/troubleshooting/">Troubleshooting</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/gateways/thethingsindoor/">The Things Indoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/thethingsoutdoor/">The Things Outdoor Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/gateway/">The Things Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/">MultiTech Conduit</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/">RAK2245 Pi Hat Edition - LoRaWAN® Gateway Concentrator Module</a>
            <ul>
                <li class=""><a href="/docs/gateways/rak2245/device-firmware-setup.html">Device Firmware Setup</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/accesing-gateway.html">Accessing Your Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/configuring-gateway.html">Configuring Your Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/rak2245/connecting-to-ttn.html">Connecting to The Things Network (TTN)</a>
                </li>
                <li class="active"><a href="/docs/gateways/rak2245/deploy-balena-basics-station-gateway.html">Deploy Balena Basics™ Station</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/rak7243c/">RAK7243C Pilot Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/rak831/">RAK831</a>
                </li>
                <li class=""><a href="/docs/gateways/pisupply-hat/">Pi Supply Gateway HAT</a>
                </li>
                <li class=""><a href="/docs/gateways/aaeon/">AAEON</a>
                </li>
                <li class=""><a href="/docs/gateways/cisco/">Cisco LoRaWAN Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/">Kerlink</a>
                </li>
                <li class=""><a href="/docs/gateways/laird/">Laird RG1xx</a>
                </li>
                <li class=""><a href="/docs/gateways/lorrier/">Lorrier LR2</a>
                </li>
                <li class=""><a href="/docs/gateways/mikrotik/">MikroTik Routerboard</a>
                </li>
                <li class=""><a href="/docs/gateways/st/">P-NUCLEO-LRWAN2</a>
                </li>
                <li class=""><a href="/docs/gateways/tektelic/">Tektelic</a>
                </li>
                <li class=""><a href="/docs/gateways/ursalink/">Ursalink</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-9 page-body">
        <div class="panel">
          <div class="panel-body page-content">
            <h2 id="deploy-a-lora-basics-station-using-balenaio-and-rak2245-pi-hat">Deploy a LoRa Basics™ Station using balena.io and RAK2245 Pi Hat</h2>
<p>Deploy a TTN or TTI LoRa gateway running the newest Basics Station Semtech Packet Forward protocol. With a Raspberry Pi 3/4, the RAK2245 Pi Hat and balena.io it’s easy to deploy DIY fleet of gateways.</p>
<p>The Basics Station protocol enables the LoRa gateways with a reliable and secure communication between the gateways and the cloud and it is becoming the standard Packet Forward protocol used by most of the LoRaWAN operators. It’s the standard packet forward protocol on The Things Industries.</p>
<h2 id="deploy-the-ttn-gateway">Deploy the TTN gateway</h2>
<p>Running this project is as simple as deploying it to a balenaCloud application. You can do it in just one click <a href="https://dashboard.balena-cloud.com/deploy?repoUrl=https://github.com/balenalabs/basicstation">here</a>.</p>
<p>Follow instructions, click <strong>Add a Device</strong> and flash an SD card with that OS image dowloaded from balenaCloud.</p>
<h3 id="create-the-balena-application">Create the balena Application</h3>
<p>Once you click the Deploy with Balena button, you have to create a balena Application.</p>
<p><img src="https://www.balena.io/blog/content/images/2020/07/create-deploy.png" alt="Create Deploy" /></p>
<p>After that, just click <strong>Add Device</strong> while the release is being built inside the balena Application.</p>
<p><img src="https://www.balena.io/blog/content/images/2020/07/add-device.png" alt="Add Device" /></p>
<p>It’s time to download the OS image that will have your LoRa gateway. Introduce your WiFi credentials if you are going to use WiFi.</p>
<p><img src="https://www.balena.io/blog/content/images/2020/07/add-device-2.png" alt="Add Device" /></p>
<p>Once you have the balenaOS image that will run your Basics Station LoRa gateway, open <a href="https://www.balena.io/etcher/">balenaEtcher</a> (if you don’t have it, download it) and flash your SD card with Etcher. Once flashed, insert the SD in your Raspberry Pi and power it up.</p>
<h3 id="before-configuring-your-ttn-lora-gateway">Before configuring your TTN LoRa gateway</h3>
<p><img src="https://www.balena.io/blog/content/images/2020/07/new-app.png" alt="" /></p>
<p>After some minutes, the containers of the release will be deployed on the Raspberry Pi with the RAK2245. If everything gets successfully installed, on the <strong>TAGS</strong> of your balenaCloud you should see the EUI of your gateway. You will need this EUI to register the gateway on TTN. Double click on the TAG to copy it.</p>
<p>If that does not work, go to the terminal box and click <strong>Select a target</strong>, then <strong>HostOS</strong>. Once you are inside the shell, type:</p>
<p><code class="highlighter-rouge">cat /sys/class/net/eth0/address | sed -r 's/[:]+//g' | sed -e 's#\(.\{6\}\)\(.*\)#\1FFFE\2#g'</code></p>
<p>Copy the result and you are ready to register your gateway with this EUI.</p>
<h2 id="configure-the-gateway-on-ttn">Configure the gateway on TTN</h2>
<p>Go to the <a href="https://console.thethingsnetwork.org/">TTN console</a> and <strong>Register a Gateway</strong>.</p>
<p><img src="https://www.balena.io/blog/content/images/2020/07/TTN-register-gateway.png" alt="Register Gateway" /></p>
<blockquote>
  <p>During registration, check “I’m using the legacy packet forwarder”, even though you are using Basics Station. This is a “won’t fix” issue in TTN. Paste the EUI and register the gateway.</p>
</blockquote>
<h3 id="set-up-the-lora-gateway-variables-on-balenacloud">Set up the LoRa gateway variables on balenaCloud</h3>
<p>At that moment, your gateway will be registered at TTN and now it’s time to copy the <strong>Gateway ID</strong> and the <strong>Gateway Key</strong> from the TTN console and introduce them as balena Device Variables.</p>
<p><img src="https://www.balena.io/blog/content/images/2020/07/add-device-variable.png" alt="" /></p>
<p>Actually some variables are added during the deployment, but you need to introduce the most important for TTN, the <code class="highlighter-rouge">GW_ID</code> and the <code class="highlighter-rouge">GW_KEY</code> that are the Gateway ID and the Gateway Key.</p>
<p>Having said that, the gateway is created with European frequency, de facto. If you live in another LoRaWAN region, feel free to change the TC_URI with another LNS <code class="highlighter-rouge">wss://lns.{eu-us-in-au}.thethings.network:443</code> depending on your LoRaWAN frequencies.</p>
<p>Now your device will be completely configured and ready to receive uplinks and downlinks.</p>
          </div>  
        </div>
        <div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
